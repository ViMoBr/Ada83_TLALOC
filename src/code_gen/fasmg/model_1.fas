
include 'codi_x86_64.fas'

namespace MODEL_1

elab:
	LINK 1,	loc_siz			; allocation (taille connue plus bas)

  virtual at 0				; offsets de locales apres FP
    LOC::					; marqueur zone locales
  end virtual

  virtual LOC
    align_q				; lieu d'une adresse
    MSG_ptr_disp = $			; deplacement de l'adresse de chaine cte
    dq ?
  end virtual

  postpone				; constante définie en fin
    dd	1, 10				; first, last
    MSG_ptr = $				; deviendra l'adresse
    db	'Bonjour !', 10			; caracteres de la chaine constante
  end postpone

	LDI	MSG_ptr			; adresse des caractères de chaine
	STa 1,	MSG_ptr_disp		; (FP1-MSG_ptr_disp) := MSG_ptr

  virtual LOC
    loc_siz = $				; taille des locales
  end virtual

begin:
	LDa 1,	MSG_ptr_disp
	PUT_STR
	UNLINK  1
	SYSEXIT

end namespace

align_q

